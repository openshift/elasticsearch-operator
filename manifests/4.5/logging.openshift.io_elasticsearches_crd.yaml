apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  name: elasticsearches.logging.openshift.io
spec:
  group: logging.openshift.io
  names:
    kind: Elasticsearch
    listKind: ElasticsearchList
    plural: elasticsearches
    singular: elasticsearch
  scope: Namespaced
  validation:
    openAPIV3Schema:
      description: Elasticsearch is the Schema for the elasticsearches API
      properties:
        apiVersion:
          description: 'APIVersion defines the versioned schema of this representation
            of an object. Servers should convert recognized schemas to the latest
            internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/api-conventions.md#resources'
          type: string
        kind:
          description: 'Kind is a string value representing the REST resource this
            object represents. Servers may infer this from the endpoint the client
            submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/api-conventions.md#types-kinds'
          type: string
        metadata:
          type: object
        spec:
          description: ElasticsearchSpec defines the desired state of Elasticsearch
            ManagementState indicates whether and how the operator should manage the
            component
          properties:
            indexManagement:
              description: IndexManagementSpec specifies index management for an Elasticsearch
                cluster
              properties:
                mappings:
                  items:
                    description: IndexManagementPolicyMappingSpec maps a management
                      policy to an index
                    properties:
                      aliases:
                        items:
                          type: string
                        type: array
                      name:
                        type: string
                      policyRef:
                        type: string
                    required:
                    - name
                    - policyRef
                    type: object
                  type: array
                policies:
                  items:
                    description: IndexManagementPolicySpec is a definition of an index
                      management policy
                    properties:
                      name:
                        type: string
                      phases:
                        properties:
                          delete:
                            properties:
                              minAge:
                                description: TimeUnit is a time unit like h,m,d
                                type: string
                            required:
                            - minAge
                            type: object
                          hot:
                            properties:
                              actions:
                                properties:
                                  rollover:
                                    properties:
                                      maxAge:
                                        description: TimeUnit is a time unit like
                                          h,m,d
                                        type: string
                                    required:
                                    - maxAge
                                    type: object
                                required:
                                - rollover
                                type: object
                            required:
                            - actions
                            type: object
                        type: object
                      pollInterval:
                        description: TimeUnit is a time unit like h,m,d
                        type: string
                    required:
                    - name
                    - phases
                    - pollInterval
                    type: object
                  type: array
              required:
              - mappings
              - policies
              type: object
            managementState:
              description: Managed means that the operator is actively managing its
                resources and trying to keep the component active. It will only upgrade
                the component if it is safe to do so Unmanaged means that the operator
                will not take any action related to the component
              type: string
            nodeSpec:
              description: ElasticsearchNodeSpec represents configuration of an individual
                Elasticsearch node
              properties:
                image:
                  type: string
                nodeSelector:
                  additionalProperties:
                    type: string
                  type: object
                resources:
                  description: ResourceRequirements describes the compute resource
                    requirements.
                  properties:
                    limits:
                      additionalProperties:
                        type: string
                      description: 'Limits describes the maximum amount of compute
                        resources allowed. More info: https://kubernetes.io/docs/concepts/configuration/manage-compute-resources-container/'
                      type: object
                    requests:
                      additionalProperties:
                        type: string
                      description: 'Requests describes the minimum amount of compute
                        resources required. If Requests is omitted for a container,
                        it defaults to Limits if that is explicitly specified, otherwise
                        to an implementation-defined value. More info: https://kubernetes.io/docs/concepts/configuration/manage-compute-resources-container/'
                      type: object
                  type: object
                tolerations:
                  items:
                    description: The pod this Toleration is attached to tolerates
                      any taint that matches the triple <key,value,effect> using the
                      matching operator <operator>.
                    properties:
                      effect:
                        description: Effect indicates the taint effect to match. Empty
                          means match all taint effects. When specified, allowed values
                          are NoSchedule, PreferNoSchedule and NoExecute.
                        type: string
                      key:
                        description: Key is the taint key that the toleration applies
                          to. Empty means match all taint keys. If the key is empty,
                          operator must be Exists; this combination means to match
                          all values and all keys.
                        type: string
                      operator:
                        description: Operator represents a key's relationship to the
                          value. Valid operators are Exists and Equal. Defaults to
                          Equal. Exists is equivalent to wildcard for value, so that
                          a pod can tolerate all taints of a particular category.
                        type: string
                      tolerationSeconds:
                        description: TolerationSeconds represents the period of time
                          the toleration (which must be of effect NoExecute, otherwise
                          this field is ignored) tolerates the taint. By default,
                          it is not set, which means tolerate the taint forever (do
                          not evict). Zero and negative values will be treated as
                          0 (evict immediately) by the system.
                        format: int64
                        type: integer
                      value:
                        description: Value is the taint value the toleration matches
                          to. If the operator is Exists, the value should be empty,
                          otherwise just a regular string.
                        type: string
                    type: object
                  type: array
              required:
              - resources
              type: object
            nodes:
              items:
                description: ElasticsearchNode struct represents individual node in
                  Elasticsearch cluster GenUUID will be populated by the operator
                  if not provided
                properties:
                  genUUID:
                    type: string
                  nodeCount:
                    format: int32
                    type: integer
                  nodeSelector:
                    additionalProperties:
                      type: string
                    type: object
                  resources:
                    description: ResourceRequirements describes the compute resource
                      requirements.
                    properties:
                      limits:
                        additionalProperties:
                          type: string
                        description: 'Limits describes the maximum amount of compute
                          resources allowed. More info: https://kubernetes.io/docs/concepts/configuration/manage-compute-resources-container/'
                        type: object
                      requests:
                        additionalProperties:
                          type: string
                        description: 'Requests describes the minimum amount of compute
                          resources required. If Requests is omitted for a container,
                          it defaults to Limits if that is explicitly specified, otherwise
                          to an implementation-defined value. More info: https://kubernetes.io/docs/concepts/configuration/manage-compute-resources-container/'
                        type: object
                    type: object
                  roles:
                    items:
                      type: string
                    type: array
                  storage:
                    properties:
                      size:
                        description: The capacity of storage to provision.
                        type: string
                      storageClassName:
                        description: 'The class of storage to provision. More info:
                          https://kubernetes.io/docs/concepts/storage/storage-classes/'
                        type: string
                    type: object
                  tolerations:
                    items:
                      description: The pod this Toleration is attached to tolerates
                        any taint that matches the triple <key,value,effect> using
                        the matching operator <operator>.
                      properties:
                        effect:
                          description: Effect indicates the taint effect to match.
                            Empty means match all taint effects. When specified, allowed
                            values are NoSchedule, PreferNoSchedule and NoExecute.
                          type: string
                        key:
                          description: Key is the taint key that the toleration applies
                            to. Empty means match all taint keys. If the key is empty,
                            operator must be Exists; this combination means to match
                            all values and all keys.
                          type: string
                        operator:
                          description: Operator represents a key's relationship to
                            the value. Valid operators are Exists and Equal. Defaults
                            to Equal. Exists is equivalent to wildcard for value,
                            so that a pod can tolerate all taints of a particular
                            category.
                          type: string
                        tolerationSeconds:
                          description: TolerationSeconds represents the period of
                            time the toleration (which must be of effect NoExecute,
                            otherwise this field is ignored) tolerates the taint.
                            By default, it is not set, which means tolerate the taint
                            forever (do not evict). Zero and negative values will
                            be treated as 0 (evict immediately) by the system.
                          format: int64
                          type: integer
                        value:
                          description: Value is the taint value the toleration matches
                            to. If the operator is Exists, the value should be empty,
                            otherwise just a regular string.
                          type: string
                      type: object
                    type: array
                required:
                - nodeCount
                - resources
                - roles
                - storage
                type: object
              type: array
            redundancyPolicy:
              description: The policy towards data redundancy to specify the number
                of redundant primary shards
              enum:
              - FullRedundancy
              - MultipleRedundancy
              - SingleRedundancy
              - ZeroRedundancy
              type: string
          required:
          - indexManagement
          - managementState
          - nodeSpec
          - nodes
          - redundancyPolicy
          type: object
        status:
          description: ElasticsearchStatus defines the observed state of Elasticsearch
          properties:
            cluster:
              properties:
                activePrimaryShards:
                  format: int32
                  type: integer
                activeShards:
                  format: int32
                  type: integer
                initializingShards:
                  format: int32
                  type: integer
                numDataNodes:
                  format: int32
                  type: integer
                numNodes:
                  format: int32
                  type: integer
                pendingTasks:
                  format: int32
                  type: integer
                relocatingShards:
                  format: int32
                  type: integer
                status:
                  type: string
                unassignedShards:
                  format: int32
                  type: integer
              required:
              - activePrimaryShards
              - activeShards
              - initializingShards
              - numDataNodes
              - numNodes
              - pendingTasks
              - relocatingShards
              - status
              - unassignedShards
              type: object
            clusterHealth:
              type: string
            conditions:
              items:
                properties:
                  lastTransitionTime:
                    description: Last time the condition transitioned from one status
                      to another.
                    format: date-time
                    type: string
                  message:
                    description: Human-readable message indicating details about last
                      transition.
                    type: string
                  reason:
                    description: Unique, one-word, CamelCase reason for the condition's
                      last transition.
                    type: string
                  status:
                    type: string
                  type:
                    description: ClusterConditionType is a valid value for ClusterCondition.Type
                    type: string
                required:
                - lastTransitionTime
                - status
                - type
                type: object
              type: array
            indexManagement:
              properties:
                lastUpdated:
                  format: date-time
                  type: string
                mappings:
                  items:
                    properties:
                      conditions:
                        description: Reasons for the state of the corresponding mapping
                          for this status
                        items:
                          properties:
                            message:
                              type: string
                            reason:
                              type: string
                            status:
                              type: string
                            type:
                              type: string
                          type: object
                        type: array
                      lastUpdated:
                        description: LastUpdated represents the last time that the
                          status was updated.
                        format: date-time
                        type: string
                      message:
                        type: string
                      name:
                        description: Name of the corresponding mapping for this status
                        type: string
                      reason:
                        type: string
                      state:
                        description: State of the corresponding mapping for this status
                        type: string
                    type: object
                  type: array
                message:
                  type: string
                policies:
                  items:
                    properties:
                      conditions:
                        description: Reasons for the state of the corresponding policy
                          for this status
                        items:
                          properties:
                            message:
                              type: string
                            reason:
                              type: string
                            status:
                              type: string
                            type:
                              type: string
                          type: object
                        type: array
                      lastUpdated:
                        description: LastUpdated represents the last time that the
                          status was updated.
                        format: date-time
                        type: string
                      message:
                        description: Message about the corresponding policy
                        type: string
                      name:
                        description: Name of the corresponding policy for this status
                        type: string
                      reason:
                        description: Reasons for the state of the corresponding policy
                          for this status
                        type: string
                      state:
                        description: State of the corresponding policy for this status
                        type: string
                    type: object
                  type: array
                reason:
                  type: string
                state:
                  description: IndexManagementState of IndexManagment
                  type: string
              type: object
            nodes:
              items:
                description: ElasticsearchNodeStatus represents the status of individual
                  Elasticsearch node
                properties:
                  conditions:
                    items:
                      properties:
                        lastTransitionTime:
                          description: Last time the condition transitioned from one
                            status to another.
                          format: date-time
                          type: string
                        message:
                          description: Human-readable message indicating details about
                            last transition.
                          type: string
                        reason:
                          description: Unique, one-word, CamelCase reason for the
                            condition's last transition.
                          type: string
                        status:
                          type: string
                        type:
                          description: ClusterConditionType is a valid value for ClusterCondition.Type
                          type: string
                      required:
                      - lastTransitionTime
                      - status
                      - type
                      type: object
                    type: array
                  deploymentName:
                    type: string
                  roles:
                    items:
                      type: string
                    type: array
                  statefulSetName:
                    type: string
                  status:
                    type: string
                  upgradeStatus:
                    properties:
                      scheduledCertRedeploy:
                        type: string
                      scheduledRedeploy:
                        type: string
                      scheduledUpgrade:
                        type: string
                      underUpgrade:
                        type: string
                      upgradePhase:
                        type: string
                    type: object
                type: object
              type: array
            pods:
              additionalProperties:
                additionalProperties:
                  items:
                    type: string
                  type: array
                type: object
              type: object
            shardAllocationEnabled:
              type: string
          required:
          - cluster
          - clusterHealth
          - conditions
          - nodes
          - pods
          - shardAllocationEnabled
          type: object
      type: object
  version: v1
  versions:
  - name: v1
    served: true
    storage: true
